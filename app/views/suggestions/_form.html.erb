<% action_url = action_type == :new ? suggestions_url : suggestion_url(suggestion) %>
<% message = action_type == :new ? "Create Action" : "Edit Action" %>

<form class="form-horizontal" action="<%= action_url %>" method="post">
  <fieldset>
    <%= form_auth_token %>
    <legend><%= message %></legend>

    <% if action_type == :edit %>
      <input type="hidden" name="_method" value="patch">
    <% end %>

    <div class="form-group">
      <label for="suggestion_title" class="col-lg-2 control-label">Title</label>
      <div class="col-lg-10">
        <input id="suggestion_title" type="text" name="suggestion[title]" class="form-control" value="<%= suggestion.title %>" placeholder="title">
      </div>
    </div>

    <div class="form-group">
      <label for="suggestion_description" class="col-lg-2 control-label">Description</label>
      <div class="col-lg-10">
        <textarea class="form-control" name="suggestion[description]" rows="3" id="suggestion_description" placeholder="description"><%= suggestion.description %></textarea>
      </div>
    </div>

    <div class="form-group">
      <label for="suggestion_categories" class="col-lg-2 control-label">Categories</label>
      <input type="hidden" name="suggestion[category_ids][]" value="">
      <div class="col-lg-10">
        <% Category.all.each do |category| %>
          <input id="category_<%= category.name %>" type="checkbox" name="suggestion[category_ids][]"
          value="<%= category.id %>" <%= "checked" if suggestion.category_ids.include?(category.id) %>>
          <label for="category_<%= category.name %>"><%= category.name %></label>
          <br>
        <% end %>
      </div>
    </div>

    <div class="form-group">
      <div class="col-lg-10 col-lg-offset-2">
        <button type="submit" class="btn btn-primary"><%= message %></button>
      </div>
    </div>
  </fieldset>
</form>
